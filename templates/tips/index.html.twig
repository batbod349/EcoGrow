{% extends 'base.html.twig' %}

{% block title %}Liste des Tips{% endblock %}

{% block body %}
	{% include 'components/headers/pageHeader.html.twig' with {
		'title': 'Tips',
		'image_path': asset('/images/icons/Tips.svg')
	} %}

	<div class="flex flex-col">
		<div class="container-page">
			<!-- Catégorie Consommation et Achats Responsables -->
			<section class="section-container">
				<h2 class="font-rawles text-3xl">Consommation et Achats Responsables</h2>
				<div class="space-y-4">
					{# Debugging - Vérifier si les données existent dans consommationTips #}
					{# dump(consommationTips) #}

					{% for tip in consommationTips %}
						<a href="{{ path('app_tips_detail', { 'id': tip.id }) }}">
							{% include 'components/cards/tipsCard.html.twig' with {
								'imagePath': tip.image,
								'title': tip.name,
							} %}
						</a>
					{% else %}
						Aucun tip n'a été trouvé.
					{% endfor %}
				</div>
			</section>

			<!-- Catégorie Économies d’Énergie et Transport Écoresponsable -->
			<section class="section-container">
				<h2 class="font-rawles text-3xl">Economies d’Énergie et Transport Écoresponsable</h2>
				<div class="space-y-4">
					{# Debugging - Vérifier si les données existent dans energieTips #}
					{# dump(energieTips) #}

					{% for tip in energieTips %}
						<a href="{{ path('app_tips_detail', { 'id': tip.id }) }}">
							{% include 'components/cards/tipsCard.html.twig' with {
								'imagePath': tip.image,
								'title': tip.name,
							} %}
						</a>
					{% else %}
						Aucun tip n'a été trouvé.
					{% endfor %}
				</div>
			</section>
		</div>
	</div>

	<div class="flex flex-col">
		<div class="container-page">
			<!-- Thèmes populaires -->
			<section class="section-container horizontal-scroll">
				<h2 class="font-rawles text-3xl">Thèmes populaires</h2>
				<div class="overflow-x-auto py-4 scroll-smooth">
					<div class="flex space-x-4">
						{% for popularTip in popularTips %}
							<a href="{{ path('app_tips_detail', { 'id': popularTip.id }) }}">
								{% include 'components/cards/tipsCard.html.twig' with {
									'imagePath': "data:image/jpeg;base64," ~ popularTip.image,
									'title': popularTip.name,
								} %}
							</a>
						{% else %}
							<p>Aucun tips n'a été trouvé.</p>
						{% endfor %}
					</div>
				</div>
			</section>

			<!-- Tips pour les courses -->
			<section class="section-container horizontal-scroll">
				<h2 class="font-rawles text-3xl">Tips pour les courses</h2>
				<div class="overflow-x-auto py-4 scroll-smooth">
					<div class="flex space-x-4">
						{% for courseTip in courseTips %}
							<a href="{{ path('app_tips_detail', { 'id': courseTip.id }) }}">
								{% include 'components/cards/tipsCard.html.twig' with {
									'imagePath': courseTip.image,
									'title': courseTip.name,
								} %}
							</a>
						{% else %}
							<p>Aucun tips n'a été trouvé.</p>
						{% endfor %}
					</div>
				</div>
			</section>
		</div>
	</div>

	<style>
		/* Style commun pour les sections à défilement horizontal */
		.horizontal-scroll .overflow-x-auto {
			overflow-x: auto; /* Permet le défilement horizontal */
			white-space: nowrap; /* Empêche les éléments de se replier sur plusieurs lignes */
			-webkit-overflow-scrolling: touch; /* Améliore le défilement tactile sur iOS */
		}

		/* Aligne les éléments horizontalement */
		.horizontal-scroll .flex {
			display: flex;
		}

		/* Espace entre les éléments */
		.horizontal-scroll .space-x-4 {
			margin-right: 16px;
		}

		/* Cache la barre de défilement pour tous les navigateurs */
		.horizontal-scroll::-webkit-scrollbar {
			display: none;
		}

		/* Pour Internet Explorer et Firefox */
		.horizontal-scroll {
			-ms-overflow-style: none; /* Pour Internet Explorer */
			scrollbar-width: none; /* Pour Firefox */
		}
	</style>
{% endblock %}