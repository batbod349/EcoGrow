{% set title = title|default('Name-Challenge') %}
{% set number = number|default('340') %}

<div class="w-96 h-full rounded-[32px] bg-greenMint border-2 border-greenDark flex flex-col items-center relative py-5 shadow-custom">
    <!-- Conteneur avec l'image en arrière-plan et le compteur en premier plan -->
    <div class="relative w-full flex justify-between items-center px-4">
        <!-- Compteur en bas à gauche -->
        <div class="counter-left bg-white text-black p-2 rounded-full absolute bottom-4 left-4 z-10">
            {% include 'components/containers/graineCompteur.html.twig' with {'number': number} %}
        </div>

        <!-- Image centrale en second plan -->
        <img class="w-[340px] h-[222px] bg-cover bg-center rounded-2xl z-0" src="..\images\miniatures\arbre.jpg" alt="image d'arbres" />

        <!-- Bouton pour afficher la description en bas à droite -->
        <div class="toggle-icon absolute bottom-4 right-4 cursor-pointer z-10" onclick="toggleDescription(this)">
            <span class="icon-up" style="display: block;">
                {% include 'components/containers/iconRounded/iconRoundedUp.html.twig' %}
            </span>
            <span class="icon-down" style="display: none;">
                {% include 'components/containers/iconRounded/iconRoundedDown.html.twig' %}
            </span>
        </div>
    </div>

    <!-- Description cachée par défaut -->
    <div class="description w-full px-4 mt-4 text-black text-sm" style="display: none;">
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed orci dui, volutpat sed.
    </div>

    <!-- Bouton "Participer" dans le cadre bleu en dessous de l'image -->
    <div class="flex justify-center mt-4">
        <button class="bg-greenDark text-white py-2 px-4 rounded-full shadow-md hover:bg-green-700 transition duration-200">
            Participer
        </button>
    </div>
</div>

<script>
    function toggleDescription(element) {
        // Cibler le container parent de l'élément, puis la description et les icônes à l'intérieur de ce container
        const container = element.closest(".w-96");
        const description = container.querySelector(".description");
        const iconUp = container.querySelector(".icon-up");
        const iconDown = container.querySelector(".icon-down");

        // Vérifier si la description est actuellement visible
        if (description.style.display === "none" || description.style.display === "") {
            
            description.style.display = "block";  
            iconUp.style.display = "block";       
            iconDown.style.display = "none";    
        } else {
            
            description.style.display = "none";  
            iconUp.style.display = "none";       
            iconDown.style.display = "block";    
        }
    }
    document.querySelectorAll(".description").forEach(description => {
        description.style.display = "none"; // Masquer toutes les descriptions par défaut
    });
</script>
