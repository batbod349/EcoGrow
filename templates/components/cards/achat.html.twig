{% set title = title|default('Name-Challenge') %}
{% set number = number|default('340') %}
{% set description = description|default('Description') %}

<div class="w-96 h-full rounded-2xl bg-white border-greenDark flex flex-col items-center relative shadow-custom">
    <!-- Conteneur avec l'image en arrière-plan et le compteur en premier plan -->
    <div class="relative w-full flex justify-between items-center rounded-t-2xl">
        <!-- Compteur -->
        <div class="counter-right bg-white text-black px-2 rounded-full absolute top-3 right-3 z-10">
            <div style="display: flex; justify-content: space-between;">
                <div>
                    {% include 'components/containers/graineCompteur.html.twig' %}
                </div>
            </div>
        </div>

        <!-- Image centrale en second plan -->
        <img class="w-full h-auto bg-cover bg-center rounded-t-2xl z-0" src="..\images\miniatures\arbre.jpg" alt="image d'arbres"/>
    </div>

    <!-- Conteneur blanc avec titre et description (masqué au départ) -->
    <div class="info-container w-full max-w-[91%] px-1 mt-2 text-black bg-white py-3 rounded-lg shadow-lg" style="display: none;">
        <p class="text-sm">{{ description }}</p>
    </div>

    <!-- Titre et icône de bascule toujours visibles -->
    <div class="flex items-center justify-between w-full max-w-[91%] px-1 mt-2">
        <h3 class="font-bold text-lg">{{ title }}</h3>
        <div class="toggle-icon cursor-pointer z-10" onclick="toggleDescription(this)">
            <span class="icon-up" style="display: block;">
                {% include 'components/containers/iconRounded/iconRoundedUp.html.twig' with {'bgColor': "bg-greenMint"} %}
            </span>
            <span class="icon-down" style="display: none;">
                {% include 'components/containers/iconRounded/iconRoundedDown.html.twig' with {'bgColor': "bg-greenMint"} %}
            </span>
        </div>
    </div>

    <!-- Bouton "Participer" -->
    <div class="flex justify-center my-4">
        <button class="border text-black border-greenDark py-2 px-4 rounded-full shadow-md hover:bg-green-700 transition duration-200">
            <a href="http://127.0.0.1:8000/achat">Participer</a>
        </button>
    </div>
</div>

<script>
    function toggleDescription(element) {
        const container = element.closest(".w-96");
        const infoContainer = container.querySelector(".info-container");
        const iconUp = container.querySelector(".icon-up");
        const iconDown = container.querySelector(".icon-down");

        // Toggle entre affichage et masquage du conteneur blanc
        if (infoContainer.style.display === "none" || infoContainer.style.display === "") {
            infoContainer.style.display = "block"; // Afficher le carré blanc avec description
            iconUp.style.display = "block"; // Afficher l'icône "up"
            iconDown.style.display = "none"; // Cacher l'icône "down"
        } else {
            infoContainer.style.display = "none"; // Cacher la description
            iconUp.style.display = "none"; // Cacher l'icône "up"
            iconDown.style.display = "block"; // Afficher l'icône "down"
        }
    }

    // Masquer par défaut le contenu du carré blanc
    document.querySelectorAll(".info-container").forEach(el => {
        el.style.display = "none";
    });
</script>
